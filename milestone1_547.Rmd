---
title: "Dataset, EDA and research question"
author: "Marion Nyberg & Rachel Han"
date: "28/02/2020"
output: html_document
---
```{r, echo=FALSE, warning=FALSE,include=FALSE}
library(tidyverse)
library(ggplot2)
library(knitr)
library(DT)
library(rmarkdown)
library(plotly)
```

# Data Description
The [dataset](https://www.kaggle.com/datasnaek/youtube-new) `Trending YouTube Video Statistics' is put together by [Mitchell Jolly](https://mitchelljolly.com/) from YouTube API, which was last updated on 2019-06-02. The scripts that scraped the data from YouTube API can be found [here](https://github.com/mitchelljy/Trending-YouTube-Scraper). 

There are 10 datasets presented specific to the following countries: USA, Great Britain, Germany, Canada, France, Russia, Mexico, South Korea, Japan and India. We choose the Canada dataset to explore. The dataset contains rows of trending videos which include features like category, tags, number of views, likes, dislikes and shares.



```{r}
# read Canada dataset csv file
CAN <- read.csv(file = 'data/CAvideos.csv')
```

# EDA

In this dataset, there are 40881 observations and 16 features.
```{r}
nrow(CAN)
ncol(CAN)
```


```{r show-tibble}
features <- CAN %>% colnames() %>% as_tibble()
types <- CAN %>% sapply(class) %>% as_tibble()
feature_type <- cbind(features,types)
colnames(feature_type)<-c("Features","Type")
kable(feature_type)
```


Plot of trend between likes and views
```{r}
ggplot(CAN, aes(views, likes)) +
  geom_point() + 
  labs(x = "Views", y = "Likes") +
  theme_bw()
```

See how many videos are in each category.

```{r}
category_vids <- CAN %>% group_by(category_id) %>% 
  tally() %>% 
  arrange(desc(n))
  kable(category_vids)
```

Need to plot this.

```{r}

category_vids %>% ggplot(aes(y=n,
             x = fct_reorder(as.factor(category_vids$category_id),
                             category_vids$n,
                             max, .incr=TRUE))) +
  geom_bar(stat="identity") + 
  coord_flip() + 
  ylab("count") + 
  xlab("category") + 
  theme_bw() +
  theme(legend.position = "none") +
  ggtitle("Number of videos by Category")
```

The category corresponding to its ID can be found [here]( https://developers.google.com/youtube/v3/docs/videoCategories/list ). 

Top 5 Categories are:

- Category 24: Entertainment
- Category 25: News and Politics
- Category 22: People and Blogs
- Category 23: Comedy
- Category 10: Music

Bottom 5 Categories are:

- Category 30: Movies
- Category 29: Nonprofits & Activism
- Category 43: Shows
- Category 2: Autos and Vehicles
- Category 15: Pets and Animals


```{r}
library(tidyverse)
library(corrplot)
```

Explore correlation between numerical columns.

```{r}
CAN %>% select(views, likes, dislikes,comment_count) %>% 
  cor() %>% 
  round(2) %>% 
  corrplot(
    type="lower", 
    method="color", 
    tl.srt=45,
    addCoef.col = "black",
    diag = FALSE)
```



Mean views, likes, dislikes and comment counts for each channel

```{r}
channel.agg <- aggregate(CAN[,8:11], 
                         by = list(CAN$channel_title), 
                         FUN = mean)
```

Could maybe aggregate these data. 
```{r}
ggplot(channel.agg, aes(likes, views))+
  geom_point() +
  theme_bw()
```

# Research questions

Does the number of comment counts on Youtube videos correlate with the number of likes or dislikes on a video? 
What trends exist between comment count and video likes/dislikes?

What are the trends between views per video and likes/dislikes?

How do comment counts/likes/dislikes/views change over time?

Trend between comment count and number of views?




# Plan of action

Proposed plots:

- time series of comment counts/likes/dislikes & views

